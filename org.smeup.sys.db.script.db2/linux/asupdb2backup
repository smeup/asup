#! /bin/bash

if [ $# -lt 2 ]; then
    echo "Usage: $0 dbName backup_folder"
    exit 1
fi

db2 -v -t << EOF
CONNECT TO $1;
QUIESCE DATABASE IMMEDIATE FORCE CONNECTIONS;
CONNECT RESET;
BACKUP DATABASE $1 TO $2 WITH 1 BUFFERS BUFFER 1024 PARALLELISM 1 WITHOUT PROMPTING;
CONNECT TO $1;
UNQUIESCE DATABASE;
CONNECT RESET;
quit;
EOF

echo "Backup of $1 terminated"

